{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "New project",
  "architectural_notes": [],
  "known_issues": [
    "Profile loading fails after login with error: 'Failed to load your profile. Please try again.'"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-fix-the-post-login-startup-flow-so-an-authenticated-user-never-gets-stuck-on-the-failed-to-load-your-profile-error-screen-instead-the-app-must-deterministically-do-one-of-a-show-profilesetupdialog-for-first-time-users-no-saved-profile-yet-or-b-load-the-existing-profile-and-render-appshell",
      "title": "Fix the post-login startup flow so an authenticated user never gets stuck on the \"Failed to load your profile\" error screen; instead, the app must deterministically do one of: (a) show ProfileSetupDialog for first-time users (no saved profile yet), or (b) load the existing profile and render AppShell.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-authentication-session-error-detection-and-handling-during-profile-loading-so-real-delegation-identity-failures-are-classified-as-auth-errors-and-trigger-sign-out-recovery-while-first-time-user-cases-are-not-misclassified-as-auth-failures",
      "title": "Improve authentication/session error detection and handling during profile loading so real delegation/identity failures are classified as auth errors and trigger sign-out recovery, while first-time-user cases are not misclassified as auth failures.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-actionable-diagnostics-for-profile-loading-failures-ensure-the-error-displayed-in-startuperrorscreen-includes-a-user-friendly-message-and-the-technical-details-section-contains-the-original-error-message-sanitized-plus-a-short-hint-indicating-whether-the-failure-was-network-timeout-auth-unexpected",
      "title": "Add actionable diagnostics for profile-loading failures: ensure the error displayed in StartupErrorScreen includes a user-friendly message, and the Technical Details section contains the original error message (sanitized) plus a short hint indicating whether the failure was network/timeout/auth/unexpected.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-4",
      "summary": "Harden the backend profile APIs used at startup so they do not trap for normal first-time-user scenarios and provide a reliable way to distinguish \"no profile yet\" from true authorization failures.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Wholesale Lens",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}